<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="talabat.js" defer></script>
<link rel="stylesheet" href="header.css">
<link rel="stylesheet" href="loader.css">
<script src="loader.js" defer></script>
<script src="header.js" defer></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet" />


<style>
/* ==== Dark Mode for talabat page ==== */
body.dark-mode .content-container{
  background:#0f172a;
  color:#e6edf3;
  box-shadow:0 8px 22px rgba(0,0,0,0.35);
  border:1px solid #334155;
  border-radius:16px;
  padding:20px;
}

/* العنوان والأيقونة */
body.dark-mode .content-container h2{
  color:#7dd3fc;
}
body.dark-mode .content-container h2 i{
  color:#38bdf8;
}

/* قائمة الطلبات */
body.dark-mode .orders-list{
  background:#0b1220;
  border:1px solid #334155;
  color:#e6edf3;
  border-radius:14px;
  padding:12px;
}
body.dark-mode .orders-list::-webkit-scrollbar-track{ background:#0b1220; }
body.dark-mode .orders-list::-webkit-scrollbar-thumb{ background:#0ea5e9; }

/* الفوتر ومربعات الأيقونات */
body.dark-mode .footerContainer{
  background:linear-gradient(135deg,#0e7490,#083344);
  box-shadow:0 8px 18px rgba(0,0,0,0.35);
}
body.dark-mode .footer-title{
  color:#e6edf3;
}
body.dark-mode .icon-box{
  background:#0f172a;
  color:#e6edf3;
  box-shadow:0 6px 14px rgba(0,0,0,0.30);
  border:1px solid #334155;
}
body.dark-mode .icon-box i{ color:#7dd3fc; }
body.dark-mode .icon-box h3{ color:#e6edf3; }
body.dark-mode .icon-box p{ color:#cbd5e1; }


/* Dark mode style for order cards */
body.dark-mode .order-card {
  background: #1a2234;        /* خلفية داكنة */
  color: #e6edf3;             /* النصوص فاتحة */
  border: 1px solid #334155;  /* إطار أنعم */
}

body.dark-mode .order-card .order-header {
  background: #0f172a;        /* تمييز الهيدر داخل الكارد */
  color: #e6edf3;
}

body.dark-mode .order-card .order-status {
  color: #fbbf24;             /* أصفر للتأكيد */
}

body.dark-mode .order-card .order-details {
  background: #0b1220;
  color: #dbe2ea;
}

/* تحسين النصوص في تفاصيل الطلب للوضع الداكن */
body.dark-mode .order-card .order-details {
  background: #0b1220;
  color: #ffffff;              /* جعل النص أبيض واضح */
}

body.dark-mode .order-card .order-details p,
body.dark-mode .order-card .order-details li,
body.dark-mode .order-card .order-details strong,
body.dark-mode .order-card .order-details span {
  color: #ffffff !important;   /* ضمان أن كل النصوص تكون بيضاء */
}

body.dark-mode .order-card .order-details strong {
  color: #93c5fd !important;   /* تمييز النص الغامق بلون أزرق فاتح */
}


/* الهواتف (شاشات أصغر من 480px) */
@media (max-width: 480px) {
  .content-container {
    margin: 20px 10px;
    padding: 15px;
  }

  .order-card {
    padding: 12px;
    font-size: 14px;
  }

  .order-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }

  .order-status {
    font-size: 13px;
    padding: 4px 10px;
  }

  .btn-show-proof {
    font-size: 14px;
    padding: 8px 12px;
  }

  .footer-icons {
    flex-direction: column;
    gap: 15px;
  }

  .icon-box {
    width: 100%;
    max-width: 250px;
  }
}

@media (max-width: 480px) {
  #sidebar ul li {
    padding: 18px 16px;
    font-size: 1rem;
  }
}

@media (max-width: 480px) {
  .footer-icons {
    flex-direction: column;
    align-items: center;
  }

  .icon-box {
    width: 90%;
    margin: 10px 0;
  }
}

@media (max-width: 480px) {
  .btn-show-proof {
    width: 100%;
    text-align: center;
  }
}

/* ======== Mobile Clean Patch (≤480px) ======== */
@media (max-width: 480px) {
  /* الهيدر غالبًا ثابت، وعندك body فيه padding-top مكرر 60/70px.
     ثبّتناه على 56px عشان مايبقاش فيه فراغ زائد. */
  body { padding-top: 56px !important; }

  /* الحاوية الرئيسية: عرض كامل، بدون ظل ثقيل */
  .content-container{
    max-width: none;
    width: 100%;
    margin: 56px 0 10px;
    padding: 8px;
    border: 0;
    border-radius: 0;
    background: transparent;
    box-shadow: none;
  }

  /* مساحة جانبية بسيطة للّست */
  #ordersContainer { padding: 0 8px; }

  /* الكرت: تبسيط تام + تباين واضح */
  .order-card{
    background: #0f172a;                 /* داكن نظيف */
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: none;
    border-radius: 12px;
    padding: 0;                           /* الرأس يحمل الحشو */
    margin-bottom: 10px;
    transform: none;
  }
  .order-card::after{ display: none; }    /* إلغاء توهج الزاوية */

  /* رأس الكرت: منطقة ضغط كبيرة + شبكة مرتبة */
  .order-header{
    display: grid;
    grid-template-columns: 1fr auto 16px; /* معلومات | شارة | سهم */
    align-items: center;
    gap: 8px;
    padding: 12px;
    background: transparent;
  }
  .order-header > div:first-child{
    font-size: 14px;
    line-height: 1.5;
    color: #e6edf3;
  }
  .order-header i{                         /* السهم */
    font-size: 14px;
    margin: 0;
    transition: transform .2s ease;
  }
  /* تدوير السهم عند الفتح (سنضيف كلاس .open بالـ JS) */
  .order-card.open .order-header i { transform: rotate(180deg); }

  /* شارة الحالة كبادج صغيرة */
  .order-status{
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 999px;
    line-height: 1;
    white-space: nowrap;
  }

  /* تفاصيل الطلب: قراءة أسهل */
  .order-details{
    display: none;
    border-top: 1px solid rgba(255,255,255,0.06);
    background: #0b1220;
    padding: 12px;
    font-size: 13.5px;
    line-height: 1.6;
    border-radius: 0 0 12px 12px;
  }

  /* زر إثبات التحويل: عريض وواضح */
  .btn-show-proof{
    width: 100%;
    padding: 10px 12px;
    font-size: 14px;
  }

  /* سلوك أفضل لشاشات اللمس */
  @media (pointer: coarse) {
    .order-card:hover,
    .order-card:active { transform: none; box-shadow: none; }
  }
}

/* ======== Mobile Clean Patch (≤480px) ======== */
@media (max-width: 480px) {
  body { padding-top: 56px !important; }

  .content-container {
    max-width: none;
    width: 100%;
    margin: 56px 0 10px;
    padding: 8px;
    border: 0;
    border-radius: 0;
    box-shadow: none;
  }

  #ordersContainer { padding: 0 8px; }

  .order-card {
    border-radius: 12px;
    padding: 0;
    margin-bottom: 10px;
    transform: none;
    box-shadow: none;
  }
  .order-card::after { display: none; }

  .order-header {
    display: grid;
    grid-template-columns: 1fr auto 16px;
    align-items: center;
    gap: 8px;
    padding: 12px;
  }
  .order-header > div:first-child {
    font-size: 14px;
    line-height: 1.5;
  }
  .order-header i {
    font-size: 14px;
    transition: transform .2s ease;
  }
  .order-card.open .order-header i { transform: rotate(180deg); }

  .order-status {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 999px;
    line-height: 1;
    white-space: nowrap;
  }

  .order-details {
    display: none;
    padding: 12px;
    font-size: 13.5px;
    line-height: 1.6;
    border-radius: 0 0 12px 12px;
  }

  .btn-show-proof {
    width: 100%;
    padding: 10px 12px;
    font-size: 14px;
  }
}

/* ===== تخصيص ألوان الوضع الداكن ===== */
@media (max-width: 480px) {
  body.dark-mode .order-card {
    background: #0f172a;
    border: 1px solid rgba(255,255,255,0.08);
  }
  body.dark-mode .order-header > div:first-child { color: #e6edf3; }
  body.dark-mode .order-details {
    border-top: 1px solid rgba(255,255,255,0.06);
    background: #0b1220;
    color: #e6edf3;
  }

  /* الوضع الفاتح (عادي) */
  body:not(.dark-mode) .order-card {
    background: #ffffff;
    border: 1px solid #ddd;
  }
  body:not(.dark-mode) .order-header > div:first-child { color: #222; }
  body:not(.dark-mode) .order-details {
    border-top: 1px solid #eee;
    background: #fafafa;
    color: #333;
  }
}
/* ===== إصلاح اختفاء الخلفية في الوضع الفاتح ===== */

/* محتوى عام: خلي الحاوية بيضاء في الوضع الفاتح */
body:not(.dark-mode) .content-container{
  background: #ffffff;
  border: 1px solid #e8e8e8;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.04);
}



/* تضمن الظهور الصحيح على الشاشات الصغيرة أيضًا */
@media (max-width: 480px){
  body:not(.dark-mode) .content-container{
    background: #ffffff;          /* لا تخليها شفافة على الموبايل */
    border: 1px solid #e8e8e8;
    border-radius: 12px;
    margin: 56px 8px 10px;
    padding: 8px;
  }
  body:not(.dark-mode) .orders-list{
    background: #ffffff;
    border: 1px solid #e6e6e6;
    border-radius: 12px;
    padding: 8px;
  }
}
/* ===== لون الحالة في الوضع الداكن ===== */
/* عنوان اليوم في قائمة الطلبات */
.orders-day-title{
  margin:16px 4px 8px; font-weight:800; font-size:16px; color:#0b1220;
  border-inline-start:4px solid #0ea5e9; padding-inline-start:8px;
}
body.dark-mode .orders-day-title{ color:#e6edf3; border-color:#38bdf8; }

body.dark-mode .order-status {
  color: #ffffff !important;   /* إجبار اللون أبيض */
}

/* تقويم الطلبات */
.calendar-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin:10px 0; }
.calendar-header .calendar-label{ font-weight:800; font-size:18px; }
.calendar-header button{ padding:6px 10px; border:1px solid #ccc; border-radius:8px; background:#fff; cursor:pointer }
body.dark-mode .calendar-header button{ background:#0f172a; color:#e6edf3; border-color:#334155 }

.calendar-grid{ display:grid; grid-template-columns: repeat(7, 1fr); gap:6px; }
.calendar-cell{ padding:10px; border:1px solid #e6e6e6; border-radius:10px; min-height:60px; background:#fff; position:relative }
.calendar-cell.head{ background:#f3f6ff; font-weight:800; text-align:center }
.calendar-cell.blank{ background:transparent; border:0 }
.calendar-cell.day .num{ font-weight:800; font-size:14px }
.calendar-cell.day .count{ position:absolute; top:8px; inset-inline-end:8px; background:#0ea5e9; color:#fff; border-radius:999px; padding:2px 8px; font-size:12px }
.calendar-cell.day.has-orders{ box-shadow: 0 2px 10px rgba(0,0,0,.06) }
.calendar-cell.day.selected{ outline:2px solid #38bdf8 }
body.dark-mode .calendar-cell{ background:#0f172a; color:#e6edf3; border-color:#334155 }
body.dark-mode .calendar-cell.head{ background:#0b1220 }


</style>


<title>طلباتي</title>
  <link rel="icon" href="emp.png" type="image/png">
</head>
<body>
<div id="headerContainer"></div>
<div id="sidebarContainer"></div>
<div id="preloader">
  <div class="loader"></div>
</div>
<div id="ordersContainer"></div>
<div style="height: 50px;"></div>
<div id="footerContainer"></div>
<script>
  // 1) فعّل الثيم المحفوظ مبكرًا قدر الإمكان
  (function(){
    try{
      if(localStorage.getItem('theme') === 'dark'){
        document.body.classList.add('dark-mode');
      }
    }catch(e){}
  })();

  // 2) انتظر DOMContentLoaded لضمان جاهزية العناصر وملفات defer (مثل header.js)
  window.addEventListener('DOMContentLoaded', () => {
    // إنشاء الحاوية الرئيسية للمحتوى
    const contentContainer = document.createElement('div');
    contentContainer.className = 'content-container';

    // العنوان + الأيقونة
    const heading = document.createElement('h2');
    const icon = document.createElement('i');
    // Font Awesome v6
    icon.className = 'fa-solid fa-history';
    heading.appendChild(icon);
    heading.append(' طلباتي:');
    contentContainer.appendChild(heading);\r\n    // شريط أدوات بسيط (فرز حسب التاريخ)\r\n    const toolbar = document.createElement('div');\r\n    toolbar.id = 'ordersToolbar';\r\n    toolbar.style.cssText = 'display:flex;gap:8px;align-items:center;justify-content:flex-start;margin:8px 0;';\r\n    const sortLbl = document.createElement('label');\r\n    sortLbl.setAttribute('for','ordersSort');\r\n    sortLbl.textContent = 'فرز حسب التاريخ:';\r\n    const sortSel = document.createElement('select');\r\n    sortSel.id = 'ordersSort';\r\n    sortSel.style.cssText = 'padding:6px 10px;border:1px solid #ccc;border-radius:8px;';\r\n    const optDesc = document.createElement('option'); optDesc.value = 'desc'; optDesc.textContent = 'أحدث أولاً';\r\n    const optAsc  = document.createElement('option'); optAsc.value = 'asc';  optAsc.textContent = 'أقدم أولاً';\r\n    sortSel.append(optDesc, optAsc);\r\n    toolbar.append(sortLbl, sortSel);\r\n    contentContainer.appendChild(toolbar);\r\n
    // قائمة الطلبات
    const ordersList = document.createElement('div');
    ordersList.id = 'ordersList';
    ordersList.className = 'orders-list';    contentContainer.appendChild(ordersList);
    // إدراج المحتوى في مكانه
    const container = document.getElementById('ordersContainer');
    if (container) {
      container.appendChild(contentContainer);
    } else {
      console.error('لم يتم العثور على العنصر بالمعرف "ordersContainer"');
    }

    // ====== بناء الفوتر ومربعات الأيقونات ======
    const footer = document.createElement('footer');
    footer.className = 'footerContainer';

    const footerTitle = document.createElement('h2');
    footerTitle.className = 'footer-title';
    footerTitle.textContent = 'لماذا تختارنا؟';
    footer.appendChild(footerTitle);

    // استخدم البيانات العالمية إن وُجدت وإلا افتراضي


    data.forEach(({ iconClass, title, desc }) => {
      const box = document.createElement('div');
      box.className = 'icon-box';

      const i = document.createElement('i');
      i.className = iconClass;
      box.appendChild(i);

      const h3 = document.createElement('h3');
      h3.textContent = title;
      box.appendChild(h3);

      const p = document.createElement('p');
      p.textContent = desc;
      box.appendChild(p);

      footer.appendChild(box);
    });

    const footerMount = document.getElementById('footerContainer');
    if (footerMount) {
      footerMount.appendChild(footer);
    }

    // ====== دوال مساعدة ======
    window.toggleOffer = function(el) {
      el.classList.toggle('selected');
    };

    window.showOrderDetails = function(orderCode) {
      const detailsEl = document.getElementById('orderDetails');
      if (!detailsEl) return; // تأكد من وجود العنصر

      if (orderCode) {
        detailsEl.style.display = 'block';
        detailsEl.innerHTML = '<p>تفاصيل الطلب لكود: <strong>' + orderCode + '</strong></p>';
      } else {
        detailsEl.style.display = 'none';
        detailsEl.innerHTML = '';
      }
    };
  });

function toggleDetails(code) {
  const d = document.getElementById(`details-${code}`);
  const card = document.getElementById(`order-${code}`);
  if (!d || !card) return;

  const isOpen = d.style.display === 'block';
  d.style.display = isOpen ? 'none' : 'block';
  card.classList.toggle('open', !isOpen);   // يضيف/يحذف كلاس للتحريك البصري
}




</script>

</body>
</html>





